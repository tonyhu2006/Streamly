<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¨¡æ€æ¡†å±‚çº§æµ‹è¯•</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            color: white;
        }

        .test-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .test-section {
            margin: 20px 0;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            border: 1px solid rgba(79, 195, 247, 0.3);
        }

        .test-button {
            background: #4fc3f7;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            font-size: 14px;
        }

        .test-button:hover {
            background: #29b6f6;
        }

        .mock-player {
            width: 100%;
            height: 300px;
            background: #000;
            border: 2px solid #4fc3f7;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 1000;
        }

        .mock-player-text {
            color: white;
            font-size: 18px;
            text-align: center;
        }

        .z-index-info {
            background: rgba(0, 0, 0, 0.7);
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 12px;
        }

        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }

        .status.success {
            background: rgba(76, 175, 80, 0.2);
            border: 1px solid #4caf50;
        }

        .status.error {
            background: rgba(244, 67, 54, 0.2);
            border: 1px solid #f44336;
        }

        .status.warning {
            background: rgba(255, 193, 7, 0.2);
            border: 1px solid #ffc107;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ”§ æ¨¡æ€æ¡†å±‚çº§ä¿®å¤æµ‹è¯•</h1>
        
        <div class="test-section">
            <h2>ğŸ“Š å½“å‰çŠ¶æ€æ£€æŸ¥</h2>
            <button class="test-button" onclick="checkCurrentStatus()">æ£€æŸ¥å½“å‰çŠ¶æ€</button>
            <div id="statusResult" class="status" style="display: none;"></div>
        </div>

        <div class="test-section">
            <h2>ğŸ¬ æ¨¡æ‹Ÿæ’­æ”¾å™¨åŒºåŸŸ</h2>
            <div class="mock-player" id="mockPlayer">
                <div class="mock-player-text">
                    ğŸ¥ æ¨¡æ‹Ÿæ’­æ”¾å™¨åŒºåŸŸ<br>
                    (é«˜z-index: 1000)
                </div>
            </div>
            <div class="z-index-info">
                å½“å‰æ’­æ”¾å™¨z-index: <span id="playerZIndex">1000</span>
            </div>
        </div>

        <div class="test-section">
            <h2>ğŸ§ª æµ‹è¯•åŠŸèƒ½</h2>
            <button class="test-button" onclick="testShowModal()">æµ‹è¯•æ˜¾ç¤ºæ¨¡æ€æ¡†</button>
            <button class="test-button" onclick="testForceModal()">å¼ºåˆ¶æ˜¾ç¤ºæ¨¡æ€æ¡†</button>
            <button class="test-button" onclick="checkZIndexes()">æ£€æŸ¥æ‰€æœ‰z-index</button>
            <button class="test-button" onclick="resetPlayerZIndex()">é‡ç½®æ’­æ”¾å™¨z-index</button>
            <div id="testResult" class="status" style="display: none;"></div>
        </div>

        <div class="test-section">
            <h2>ğŸ“‹ z-index å±‚çº§ä¿¡æ¯</h2>
            <div id="zIndexInfo" class="z-index-info">
                ç‚¹å‡»"æ£€æŸ¥æ‰€æœ‰z-index"æŒ‰é’®æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
            </div>
        </div>
    </div>

    <script>
        function checkCurrentStatus() {
            const statusDiv = document.getElementById('statusResult');
            const modal = document.getElementById('quickCreatePlaylistModal');
            
            let status = '';
            let className = 'success';
            
            if (modal) {
                status = 'âœ… æ‰¾åˆ°æ¨¡æ€æ¡†å…ƒç´ <br>';
                status += `æ¨¡æ€æ¡†å½“å‰æ˜¾ç¤ºçŠ¶æ€: ${modal.style.display || 'æœªè®¾ç½®'}<br>`;
                status += `æ¨¡æ€æ¡†z-index: ${modal.style.zIndex || window.getComputedStyle(modal).zIndex}<br>`;
                
                if (typeof showCreatePlaylistDialog === 'function') {
                    status += 'âœ… showCreatePlaylistDialog å‡½æ•°å¯ç”¨<br>';
                } else {
                    status += 'âŒ showCreatePlaylistDialog å‡½æ•°ä¸å¯ç”¨<br>';
                    className = 'error';
                }
                
                if (typeof window.forceShowModal === 'function') {
                    status += 'âœ… forceShowModal å‡½æ•°å¯ç”¨';
                } else {
                    status += 'âŒ forceShowModal å‡½æ•°ä¸å¯ç”¨';
                    className = 'error';
                }
            } else {
                status = 'âŒ æœªæ‰¾åˆ°æ¨¡æ€æ¡†å…ƒç´ ';
                className = 'error';
            }
            
            statusDiv.innerHTML = status;
            statusDiv.className = `status ${className}`;
            statusDiv.style.display = 'block';
        }

        function testShowModal() {
            const resultDiv = document.getElementById('testResult');
            
            try {
                if (typeof showCreatePlaylistDialog === 'function') {
                    showCreatePlaylistDialog();
                    resultDiv.innerHTML = 'âœ… è°ƒç”¨ showCreatePlaylistDialog() æˆåŠŸ';
                    resultDiv.className = 'status success';
                } else {
                    resultDiv.innerHTML = 'âŒ showCreatePlaylistDialog å‡½æ•°ä¸å­˜åœ¨';
                    resultDiv.className = 'status error';
                }
            } catch (e) {
                resultDiv.innerHTML = `âŒ è°ƒç”¨å¤±è´¥: ${e.message}`;
                resultDiv.className = 'status error';
            }
            
            resultDiv.style.display = 'block';
        }

        function testForceModal() {
            const resultDiv = document.getElementById('testResult');
            
            try {
                if (typeof window.forceShowModal === 'function') {
                    const success = window.forceShowModal();
                    if (success) {
                        resultDiv.innerHTML = 'âœ… å¼ºåˆ¶æ˜¾ç¤ºæ¨¡æ€æ¡†æˆåŠŸ';
                        resultDiv.className = 'status success';
                    } else {
                        resultDiv.innerHTML = 'âŒ å¼ºåˆ¶æ˜¾ç¤ºæ¨¡æ€æ¡†å¤±è´¥';
                        resultDiv.className = 'status error';
                    }
                } else {
                    resultDiv.innerHTML = 'âŒ forceShowModal å‡½æ•°ä¸å­˜åœ¨';
                    resultDiv.className = 'status error';
                }
            } catch (e) {
                resultDiv.innerHTML = `âŒ è°ƒç”¨å¤±è´¥: ${e.message}`;
                resultDiv.className = 'status error';
            }
            
            resultDiv.style.display = 'block';
        }

        function checkZIndexes() {
            const infoDiv = document.getElementById('zIndexInfo');
            const elements = [
                '#quickCreatePlaylistModal',
                '#playlistInterface',
                '#youtubeContainer',
                '#playerStatus',
                '#mockPlayer'
            ];
            
            let info = '<strong>å½“å‰z-indexå±‚çº§:</strong><br><br>';
            
            elements.forEach(selector => {
                const element = document.querySelector(selector);
                if (element) {
                    const computed = window.getComputedStyle(element);
                    const inline = element.style.zIndex;
                    info += `${selector}:<br>`;
                    info += `  å†…è”æ ·å¼: ${inline || 'æœªè®¾ç½®'}<br>`;
                    info += `  è®¡ç®—æ ·å¼: ${computed.zIndex}<br>`;
                    info += `  æ˜¾ç¤ºçŠ¶æ€: ${computed.display}<br><br>`;
                } else {
                    info += `${selector}: å…ƒç´ ä¸å­˜åœ¨<br><br>`;
                }
            });
            
            infoDiv.innerHTML = info;
        }

        function resetPlayerZIndex() {
            const mockPlayer = document.getElementById('mockPlayer');
            const playerZIndexSpan = document.getElementById('playerZIndex');
            
            mockPlayer.style.zIndex = '1000';
            playerZIndexSpan.textContent = '1000';
            
            const resultDiv = document.getElementById('testResult');
            resultDiv.innerHTML = 'âœ… æ’­æ”¾å™¨z-indexå·²é‡ç½®ä¸º1000';
            resultDiv.className = 'status success';
            resultDiv.style.display = 'block';
        }

        // é¡µé¢åŠ è½½æ—¶æ£€æŸ¥çŠ¶æ€
        window.addEventListener('load', function() {
            setTimeout(checkCurrentStatus, 1000);
        });
    </script>
</body>
</html>
